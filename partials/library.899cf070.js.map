{"mappings":"AAAA,MA2BUA,EAAaC,SAASC,eAAe,eACrCC,EAAkBF,SAASG,cAAc,YAC/C,IAAIC,EAAgBC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GA2BzEC,eAAeC,EAAoBC,GACnC,MAEMC,EAAM,sCAAqBD,6CAE3BE,QAAiBC,MAAMF,GAC7B,IAAKC,EAASE,GACV,MAAwB,MAApBF,EAASG,OACH,IAAIC,MAAM,oBAEV,IAAIA,MAAM,kCAAoCJ,EAASK,YAIrE,aAD2BL,EAASM,M,CAIpC,SAASC,EAAmBC,GACxB,MAAMC,EAAUtB,SAASuB,cAAc,OAMvC,OALAD,EAAQE,UAAY,2BACJH,EAAMI,YAzEd,kCAyEsCJ,EAAMI,YAAc,gDAAgDJ,EAAMK,4BAC9GL,EAAMK,uBAGTJ,C,CAUX,SAASK,EAAehB,GACpB,OAAQiB,MAAMjB,E,CA5DlBZ,EAAW8B,iBAAiB,SAAS,SAASC,GAC1CA,EAAEC,iBAINtB,iBACAP,EAAgBsB,UAAY,GAC5B,IAAK,MAAMb,KAAWP,EAClB,IAEI,IAAKuB,EAAehB,GAChB,MAAM,IAAIM,MAAM,qBAAqBN,KAEzC,MACMqB,EAAeZ,QADDV,EAAoBC,IAExCT,EAAgB+B,YAAYD,E,CAC9B,MAAOE,GACiB,qBAAlBA,EAAMC,QACNC,QAAQC,KAAK,iBAAiB1B,gBAE9ByB,QAAQF,MAAM,2BAA4BA,E,EAlBlDI,E,IAoEJC,QAnGYC","sources":["src/js/library.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\nconst API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = BASE_URL + '/search/movie?' + API_KEY;\nconst getGenres = BASE_URL + '/genre/movie/list' + API_KEY;\n\n\nconst options = {\n  params: {\n    key: API_KEY,\n    query: '',\n    include_adult: false,\n    language: 'en-US',\n    primary_release_year: '',\n    page: 1,\n    region: '',\n    year: '',\n  },\n};\n\n\n// const form = document.getElementById('lib-buttons');\n\n//Watched\n\n// document.addEventListener('DOMContentLoaded', function() {\n    const watchedBtn = document.getElementById('watched-btn');\n    const moviesContainer = document.querySelector('.gallery');\n    let watchedMovies = JSON.parse(localStorage.getItem('movie-watched')) || [];\n\n    watchedBtn.addEventListener('click', function(e) {\n        e.preventDefault();\n        getWatchedMovies();\n    });\n\n    async function getWatchedMovies() {\n    moviesContainer.innerHTML = ''; \n    for (const movieId of watchedMovies) {\n        try {\n            // Check if the movieId is valid\n            if (!isValidMovieId(movieId)) {\n                throw new Error(`Invalid movie ID: ${movieId}`);\n            }\n            const movie = await getMovieDetailsById(movieId);\n            const movieElement = createMovieElement(movie);\n            moviesContainer.appendChild(movieElement);\n        } catch (error) {\n            if (error.message === 'Movie not found.') {\n                console.warn(`Movie with ID ${movieId} not found.`);\n            } else {\n                console.error('Failed to display movie:', error);\n            }\n        }\n    }\n}\n    async function getMovieDetailsById(movieId) {\n    const API_KEY = \"b5e824a3d922f68ba211fcf6dbdcb6f5\";\n    const BASE_URL = 'https://api.themoviedb.org/3';\n    const url = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n        if (response.status === 404) {\n            throw new Error('Movie not found.');\n        } else {\n            throw new Error('Failed to fetch movie details: ' + response.statusText);\n        }\n    }\n    const movieDetails = await response.json();\n    return movieDetails;\n}\n\n    function createMovieElement(movie) {\n        const element = document.createElement('div');\n        element.innerHTML = `\n            <img src=\"${movie.poster_path ? IMG_URL + movie.poster_path : 'http://via.placeholder.com/1080x1500'}\" alt=\"${movie.title}\">\n            <h3>${movie.title}</h3>\n        `;\n\n        return element;\n    }\n\n    function addMovieToWatched(movieId) {\n        if (!watchedMovies.includes(movieId)) {\n            watchedMovies.push(movieId);\n            localStorage.setItem('movie-watched', JSON.stringify(watchedMovies));\n        }\n    }\n\n    function isValidMovieId(movieId) {\n        return !isNaN(movieId);\n    }\n// });\n\n// PAGINATION\n\ngetMovies(API_URL);\n\n// DISPLAY MOVIE CARDS\nfunction getMovies(url) {\n    lastUrl = url;\n}"],"names":["$1cafa503bc57b7a0$var$watchedBtn","document","getElementById","$1cafa503bc57b7a0$var$moviesContainer","querySelector","$1cafa503bc57b7a0$var$watchedMovies","JSON","parse","localStorage","getItem","async","$1cafa503bc57b7a0$var$getMovieDetailsById","movieId","url","response","fetch","ok","status","Error","statusText","json","$1cafa503bc57b7a0$var$createMovieElement","movie","element","createElement","innerHTML","poster_path","title","$1cafa503bc57b7a0$var$isValidMovieId","isNaN","addEventListener","e","preventDefault","movieElement","appendChild","error","message","console","warn","$1cafa503bc57b7a0$var$getWatchedMovies","lastUrl","$1cafa503bc57b7a0$var$BASE_URL"],"version":3,"file":"library.899cf070.js.map"}