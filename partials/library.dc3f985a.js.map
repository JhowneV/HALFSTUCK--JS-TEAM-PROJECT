{"mappings":"AAsBaA,SAASC,eAAe,eAIrCD,SAASE,iBAAiB,oBAAoB,WAC1C,MAAMC,EAAaH,SAASC,eAAe,eACrCG,EAAkBJ,SAASK,cAAc,YAC/C,IAAIC,EAAgBC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GA4BzEC,eAAeC,EAAoBC,GACnC,MAEMC,EAAM,sCAAqBD,6CAE3BE,QAAiBC,MAAMF,GAC7B,IAAKC,EAASE,GACV,MAAwB,MAApBF,EAASG,OACH,IAAIC,MAAM,oBAEV,IAAIA,MAAM,kCAAoCJ,EAASK,YAIrE,aAD2BL,EAASM,M,CAIpC,SAASC,EAAmBC,GACxB,MAAMC,EAAUxB,SAASyB,cAAc,OAMvC,OALAD,EAAQE,UAAY,2BACJH,EAAMI,YA1Ed,kCA0EsCJ,EAAMI,YAAc,gDAAgDJ,EAAMK,4BAC9GL,EAAMK,uBAGTJ,C,CAUX,SAASK,EAAehB,GACpB,OAAQiB,MAAMjB,E,CA7DlBV,EAAWD,iBAAiB,SAAS,SAAS6B,GAC1CA,EAAEC,iBAINrB,iBACIP,EAAgBsB,UAAY,GAC5B,IAAK,MAAMb,KAAWP,EAClB,IACI,IAAKuB,EAAehB,GAChB,MAAM,IAAIM,MAAM,qBAAqBN,KAEzC,MACMoB,EAAeX,QADDV,EAAoBC,IAExCT,EAAgB8B,YAAYD,E,CAEhC,MAAOE,GACmB,qBAAlBA,EAAMC,QACNC,QAAQC,KAAK,iBAAiBzB,gBAE9BwB,QAAQF,MAAM,2BAA4BA,E,EAlBtDI,E,OAqEJC,QApGYC","sources":["src/js/library.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\nconst API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = BASE_URL + '/search/movie?' + API_KEY;\nconst getGenres = BASE_URL + '/genre/movie/list' + API_KEY;\n\n\nconst options = {\n  params: {\n    key: API_KEY,\n    query: '',\n    include_adult: false,\n    language: 'en-US',\n    primary_release_year: '',\n    page: 1,\n    region: '',\n    year: '',\n  },\n};\n\n\nconst form = document.getElementById('lib-buttons');\n\n//Watched\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const watchedBtn = document.getElementById('watched-btn');\n    const moviesContainer = document.querySelector('.gallery');\n    let watchedMovies = JSON.parse(localStorage.getItem('movie-watched')) || [];\n\n    watchedBtn.addEventListener('click', function(e) {\n        e.preventDefault();\n        getWatchedMovies();\n    });\n\n    async function getWatchedMovies() {\n        moviesContainer.innerHTML = ''; \n        for (const movieId of watchedMovies) {\n            try {\n                if (!isValidMovieId(movieId)) {\n                    throw new Error(`Invalid movie ID: ${movieId}`);\n                }\n                const movie = await getMovieDetailsById(movieId);\n                const movieElement = createMovieElement(movie);\n                moviesContainer.appendChild(movieElement);\n    } \n            catch (error) {\n                if (error.message === 'Movie not found.') {\n                    console.warn(`Movie with ID ${movieId} not found.`);\n                } else {\n                    console.error('Failed to display movie:', error);\n                }\n            }\n        }\n    }\n\n    async function getMovieDetailsById(movieId) {\n    const API_KEY = \"b5e824a3d922f68ba211fcf6dbdcb6f5\";\n    const BASE_URL = 'https://api.themoviedb.org/3';\n    const url = `${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n        if (response.status === 404) {\n            throw new Error('Movie not found.');\n        } else {\n            throw new Error('Failed to fetch movie details: ' + response.statusText);\n        }\n    }\n    const movieDetails = await response.json();\n    return movieDetails;\n}\n\n    function createMovieElement(movie) {\n        const element = document.createElement('div');\n        element.innerHTML = `\n            <img src=\"${movie.poster_path ? IMG_URL + movie.poster_path : 'http://via.placeholder.com/1080x1500'}\" alt=\"${movie.title}\">\n            <h3>${movie.title}</h3>\n        `;\n\n        return element;\n    }\n\n    function addMovieToWatched(movieId) {\n        if (!watchedMovies.includes(movieId)) {\n            watchedMovies.push(movieId);\n            localStorage.setItem('movie-watched', JSON.stringify(watchedMovies));\n        }\n    }\n\n    function isValidMovieId(movieId) {\n        return !isNaN(movieId);\n    }\n});\n\n// PAGINATION\n\ngetMovies(API_URL);\n\n// DISPLAY MOVIE CARDS\nfunction getMovies(url) {\n    lastUrl = url;\n}"],"names":["document","getElementById","addEventListener","watchedBtn","moviesContainer","querySelector","watchedMovies","JSON","parse","localStorage","getItem","async","getMovieDetailsById","movieId","url","response","fetch","ok","status","Error","statusText","json","createMovieElement","movie","element","createElement","innerHTML","poster_path","title","isValidMovieId","isNaN","e","preventDefault","movieElement","appendChild","error","message","console","warn","getWatchedMovies","lastUrl","$1cafa503bc57b7a0$var$BASE_URL"],"version":3,"file":"library.dc3f985a.js.map"}